Selected Files Directory Structure:

└── ./
    ├── components
    │   ├── RepoInput.tsx
    │   └── TomlPreview.tsx
    ├── services
    │   └── geminiService.ts
    ├── App.tsx
    ├── index.html
    ├── index.tsx
    ├── types.ts
    └── vite.config.ts



--- types.ts ---


export interface DeploymentConfig {
  appName: string;
  primaryRegion: string;
  internalPort: number;
  envVars: Record<string, string>;
  tomlContent: string;
  analysis: string;
  sources: Array<{ title: string; uri: string }>;
}

export interface AnalysisState {
  loading: boolean;
  statusMessage?: string;
  error: string | null;
  config: DeploymentConfig | null;
}


--- services/geminiService.ts ---


import { GoogleGenAI, Type } from "@google/genai";
import { DeploymentConfig } from "../types";

const ai = new GoogleGenAI({ apiKey: process.env.API_KEY || "" });

// List of files that help identify the stack and configuration
const CRITICAL_FILES = [
  "fly.toml",
  "Dockerfile",
  "docker-compose.yml",
  "package.json",
  "pnpm-lock.yaml",
  "yarn.lock",
  "bun.lockb",
  "go.mod",
  "requirements.txt",
  "Pipfile",
  "pyproject.toml",
  "Gemfile",
  "mix.exs",
  "composer.json",
  "pom.xml",
  "build.gradle",
  "Cargo.toml",
  "deno.json",
  "next.config.js",
  "remix.config.js",
  "nuxt.config.ts",
  "vite.config.ts",
  "Procfile"
];

const getRepoDetails = async (owner: string, repo: string) => {
  try {
    const res = await fetch(`https://api.github.com/repos/${owner}/${repo}`);
    if (!res.ok) {
      if (res.status === 404) throw new Error("Repository not found (or private)");
      if (res.status === 403) return null; // Rate limited, fallback to guessing
      throw new Error(`GitHub API Error: ${res.statusText}`);
    }
    return await res.json();
  } catch (error) {
    return null; // Fallback to raw fetch guessing
  }
};

const fetchRawFile = async (owner: string, repo: string, branch: string, filename: string): Promise<{ name: string; content: string } | null> => {
  try {
    const res = await fetch(`https://raw.githubusercontent.com/${owner}/${repo}/${branch}/${filename}`);
    if (res.ok) {
      const content = await res.text();
      // Truncate large files to avoid massive token usage, while keeping enough context
      return { name: filename, content: content.slice(0, 20000) };
    }
  } catch (e) {
    // Ignore fetch errors (404s etc) for optional files
  }
  return null;
};

export const analyzeRepoAndGenerateToml = async (repoUrl: string, onStatusUpdate?: (status: string) => void): Promise<DeploymentConfig> => {
  // 1. Parse URL
  onStatusUpdate?.("Validating repository URL...");
  const cleanUrl = repoUrl.replace("https://", "").replace("http://", "").replace("www.", "");
  const urlParts = cleanUrl.split("/");
  
  const githubIndex = urlParts.indexOf("github.com");
  let owner = "";
  let repo = "";

  if (githubIndex !== -1 && urlParts.length >= githubIndex + 3) {
    owner = urlParts[githubIndex + 1];
    repo = urlParts[githubIndex + 2];
  } else if (!repoUrl.includes("github.com") && urlParts.length === 2) {
    // Handle "owner/repo" input
    owner = urlParts[0];
    repo = urlParts[1];
  } else {
    throw new Error("Invalid GitHub URL format. Use https://github.com/owner/repo");
  }

  // 2. Get Default Branch
  onStatusUpdate?.("Fetching repository metadata...");
  let defaultBranch = "main";
  const repoDetails = await getRepoDetails(owner, repo);
  
  if (repoDetails) {
    defaultBranch = repoDetails.default_branch;
  } else {
     // Fallback if API rate limited or fails: check if main exists via raw request
     const mainRes = await fetch(`https://raw.githubusercontent.com/${owner}/${repo}/main/README.md`);
     if (!mainRes.ok) {
        const masterRes = await fetch(`https://raw.githubusercontent.com/${owner}/${repo}/master/README.md`);
        if (masterRes.ok) defaultBranch = "master";
     }
  }

  // 3. Scan for critical files
  onStatusUpdate?.(`Scanning files (branch: ${defaultBranch})...`);
  const filePromises = CRITICAL_FILES.map(file => fetchRawFile(owner, repo, defaultBranch, file));
  const files = (await Promise.all(filePromises)).filter(f => f !== null) as { name: string; content: string }[];

  // 4. Construct Prompt
  onStatusUpdate?.("Consulting Gemini 3.0 Pro...");
  
  const fileContext = files.map(f => `--- BEGIN ${f.name} ---\n${f.content}\n--- END ${f.name} ---`).join("\n\n");
  
  const prompt = `
    You are an expert DevOps engineer specializing in Fly.io deployments.
    
    Target Repository: github.com/${owner}/${repo}
    
    I have scanned the repository and retrieved the following configuration files:
    
    ${fileContext.length > 0 ? fileContext : "No standard configuration files (package.json, Dockerfile, etc.) were found in the root. Please infer the stack based on the repository name and common patterns, or assume a standard structure."}
    
    Your Task:
    1. DEEP ANALYSIS: Identify the tech stack (language, framework, version, package manager).
    2. PORT DETECTION: Determine the application's internal listening port. 
       - Prioritize reading 'PORT' environment variable if the code supports it.
       - Identify hardcoded ports (3000, 8080, 5000) if any.
       - If unknown, suggest the framework default.
    3. FLY.TOML GENERATION: Generate a valid, production-ready 'fly.toml' configuration.
       - If a Dockerfile exists, simple app config.
       - If NO Dockerfile, use the appropriate Fly.io Buildpack (e.g., [build] builder = "heroku/buildpacks:20" or specific image).
       - Ensure [http_service] or [[services]] matches the internal_port.
       - Add [checks] (health checks) matching the framework's health endpoints if apparent.
    4. ENV VARS: List essential environment variables referenced in the code (e.g., DATABASE_URL, API_KEYS) that the user must set.
    5. RATIONALE: Briefly explain the configuration choices.

    Use the 'googleSearch' tool to verify the latest Fly.io configuration syntax or builder images for this specific stack if needed.
  `;

  // 5. Call Gemini
  const model = "gemini-3-pro-preview";

  const response = await ai.models.generateContent({
    model: model,
    contents: [{ role: "user", parts: [{ text: prompt }] }],
    config: {
      tools: [{ googleSearch: {} }],
      responseMimeType: "application/json",
      responseSchema: {
        type: Type.OBJECT,
        properties: {
          appName: { type: Type.STRING, description: "A suggested slug for the app name (kebab-case)" },
          primaryRegion: { type: Type.STRING, description: "Suggested primary region code (e.g. iad)" },
          internalPort: { type: Type.NUMBER, description: "The detected internal port" },
          envVars: { 
            type: Type.OBJECT,
            description: "Map of Environment Variable Name -> Description of why it is needed"
          },
          tomlContent: { type: Type.STRING, description: "The raw content of the generated fly.toml file" },
          analysis: { type: Type.STRING, description: "A concise technical summary of the detected stack and configuration logic" },
        },
        required: ["appName", "primaryRegion", "internalPort", "tomlContent", "analysis"]
      }
    }
  });

  onStatusUpdate?.("Processing response...");

  const jsonStr = response.text || "{}";
  let data;
  try {
    data = JSON.parse(jsonStr);
  } catch (e) {
    console.error("Failed to parse JSON", jsonStr);
    throw new Error("AI generated an invalid response format. Please try again.");
  }

  const groundingChunks = response.candidates?.[0]?.groundingMetadata?.groundingChunks || [];
  const sources = groundingChunks
    .filter((chunk: any) => chunk.web)
    .map((chunk: any) => ({
      title: chunk.web.title,
      uri: chunk.web.uri
    }));

  return {
    ...data,
    sources,
    envVars: data.envVars || {}
  };
};


--- components/RepoInput.tsx ---


import React, { useState } from 'react';

interface RepoInputProps {
  onAnalyze: (url: string) => void;
  loading: boolean;
}

const RepoInput: React.FC<RepoInputProps> = ({ onAnalyze, loading }) => {
  const [url, setUrl] = useState('');

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (url.trim()) {
      onAnalyze(url.trim());
    }
  };

  const isValidInput = url.includes('github.com') || (url.split('/').length === 2 && !url.includes('http'));

  return (
    <form onSubmit={handleSubmit} className="w-full max-w-2xl mx-auto space-y-4">
      <div className="relative group">
        <div className="absolute -inset-1 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg blur opacity-25 group-focus-within:opacity-50 transition duration-500"></div>
        <div className="relative flex items-center glass rounded-lg px-4 py-2 ring-1 ring-white/10 focus-within:ring-blue-500/50 transition-all">
          <i className="fa-brands fa-github text-2xl text-slate-400 mr-4"></i>
          <input
            type="text"
            placeholder="https://github.com/username/repo or username/repo"
            value={url}
            onChange={(e) => setUrl(e.target.value)}
            disabled={loading}
            className="w-full bg-transparent border-none outline-none py-3 text-lg placeholder:text-slate-600 text-slate-100 disabled:opacity-50"
            autoFocus
          />
          <button
            type="submit"
            disabled={loading || !url.trim()}
            className={`ml-4 px-6 py-2 rounded-md font-semibold transition-all duration-300 flex-shrink-0 ${
              loading 
                ? 'bg-slate-700 text-slate-500 cursor-not-allowed' 
                : 'bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-500/20 hover:shadow-blue-500/40 transform hover:scale-105 active:scale-95'
            }`}
          >
            {loading ? (
              <span className="flex items-center">
                <i className="fa-solid fa-circle-notch fa-spin mr-2"></i> Analyzing
              </span>
            ) : 'Analyze'}
          </button>
        </div>
      </div>
      <p className="text-center text-slate-500 text-sm">
        Enter a public GitHub URL to generate a Fly.io configuration.
      </p>
    </form>
  );
};

export default RepoInput;


--- components/TomlPreview.tsx ---


import React, { useState } from 'react';
import { DeploymentConfig } from '../types';

interface TomlPreviewProps {
  config: DeploymentConfig;
}

const TomlPreview: React.FC<TomlPreviewProps> = ({ config }) => {
  const [copied, setCopied] = useState(false);

  const downloadToml = () => {
    const blob = new Blob([config.tomlContent], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.download = 'fly.toml';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    URL.revokeObjectURL(url);
  };

  const copyToClipboard = () => {
    navigator.clipboard.writeText(config.tomlContent);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <div className="space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700">
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        {/* Analysis Card */}
        <div className="glass p-6 rounded-xl space-y-4 border border-blue-500/10 hover:border-blue-500/20 transition-all">
          <div className="flex items-center justify-between">
            <h3 className="text-xl font-bold flex items-center text-slate-100">
              <i className="fa-solid fa-magnifying-glass-chart mr-3 text-blue-400"></i>
              Analysis Report
            </h3>
            <span className="px-3 py-1 bg-blue-500/10 text-blue-400 rounded-full text-xs font-semibold uppercase tracking-wider border border-blue-500/10">
              AI Insights
            </span>
          </div>
          <div className="text-slate-300 leading-relaxed text-sm whitespace-pre-wrap font-light">
            {config.analysis}
          </div>
          
          {config.sources.length > 0 && (
            <div className="pt-4 border-t border-slate-700/50 mt-4">
              <h4 className="text-xs font-bold text-slate-500 uppercase mb-3 tracking-wider">Reference Sources</h4>
              <div className="flex flex-wrap gap-2">
                {config.sources.map((source, i) => (
                  <a
                    key={i}
                    href={source.uri}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="text-xs bg-slate-800 hover:bg-slate-700 text-slate-400 px-3 py-1.5 rounded-md transition-colors flex items-center border border-white/5"
                  >
                    <i className="fa-solid fa-link mr-2 opacity-70"></i>
                    {source.title.length > 40 ? source.title.substring(0, 40) + '...' : source.title}
                  </a>
                ))}
              </div>
            </div>
          )}
        </div>

        {/* Recommended Secrets/Env */}
        <div className="glass p-6 rounded-xl space-y-4 flex flex-col border border-purple-500/10 hover:border-purple-500/20 transition-all">
          <h3 className="text-xl font-bold flex items-center text-slate-100">
            <i className="fa-solid fa-key mr-3 text-purple-400"></i>
            Env Recommendations
          </h3>
          <p className="text-slate-400 text-sm">
            Based on the scan, you likely need these secrets set via <code className="bg-slate-800 px-1.5 py-0.5 rounded text-purple-300 font-mono text-xs">fly secrets set</code>:
          </p>
          <div className="flex-grow space-y-3 mt-2 overflow-y-auto max-h-[300px] pr-2 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent">
            {Object.keys(config.envVars).length > 0 ? (
              Object.entries(config.envVars).map(([key, desc]) => (
                <div key={key} className="flex flex-col p-3 bg-slate-900/50 rounded-lg border border-slate-800 hover:border-purple-500/30 transition-colors">
                  <div className="flex items-center justify-between mb-1">
                     <span className="text-purple-300 font-mono text-xs font-bold uppercase select-all">{key}</span>
                     <i className="fa-solid fa-lock text-[10px] text-slate-600"></i>
                  </div>
                  <span className="text-slate-500 text-xs leading-tight">{desc}</span>
                </div>
              ))
            ) : (
              <div className="flex flex-col items-center justify-center h-full text-slate-500 space-y-2 py-8 opacity-50">
                <i className="fa-regular fa-folder-open text-2xl"></i>
                <p className="italic text-sm">No specific environment variables detected.</p>
              </div>
            )}
          </div>
        </div>
      </div>

      {/* TOML Preview */}
      <div className="glass rounded-xl overflow-hidden border border-blue-500/20 shadow-2xl shadow-black/20">
        <div className="bg-slate-800/80 px-6 py-4 flex items-center justify-between border-b border-slate-700/50 backdrop-blur-md">
          <div className="flex items-center space-x-2">
            <div className="flex space-x-1.5 mr-4">
              <span className="w-3 h-3 rounded-full bg-red-500/80"></span>
              <span className="w-3 h-3 rounded-full bg-yellow-500/80"></span>
              <span className="w-3 h-3 rounded-full bg-green-500/80"></span>
            </div>
            <span className="text-slate-300 text-sm font-mono font-medium">fly.toml</span>
            <span className="text-slate-600 text-xs px-2 border-l border-slate-600/30">Generated Config</span>
          </div>
          <div className="flex space-x-3">
            <button
              onClick={copyToClipboard}
              className={`px-3 py-1.5 text-xs font-medium rounded transition-all flex items-center ${
                copied 
                  ? 'bg-green-500/20 text-green-400' 
                  : 'text-slate-400 hover:text-white hover:bg-white/5'
              }`}
            >
              <i className={`fa-regular ${copied ? 'fa-circle-check' : 'fa-copy'} mr-2`}></i> 
              {copied ? 'Copied!' : 'Copy'}
            </button>
            <button
              onClick={downloadToml}
              className="px-4 py-1.5 text-xs font-bold bg-blue-600 hover:bg-blue-500 text-white rounded transition-all shadow-lg shadow-blue-600/20 flex items-center active:scale-95"
            >
              <i className="fa-solid fa-download mr-2"></i> Download
            </button>
          </div>
        </div>
        <div className="p-6 bg-[#0B1120] overflow-x-auto relative group">
           <div className="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity">
              <span className="text-[10px] text-slate-600 font-mono">TOML</span>
           </div>
          <pre className="mono text-sm leading-relaxed text-blue-100/90 whitespace-pre selection:bg-blue-500/30">
            {config.tomlContent}
          </pre>
        </div>
      </div>

      <div className="p-6 bg-gradient-to-r from-blue-500/10 to-transparent rounded-xl border border-blue-500/20 flex items-start space-x-4">
        <div className="text-blue-400 mt-1 p-2 bg-blue-500/10 rounded-lg">
          <i className="fa-solid fa-rocket text-xl"></i>
        </div>
        <div>
          <h4 className="font-bold text-blue-100 text-lg">Ready for Takeoff</h4>
          <p className="text-blue-100/70 text-sm mt-1 leading-relaxed max-w-2xl">
            1. Place <code className="bg-blue-900/40 px-1.5 py-0.5 rounded text-blue-200 font-mono text-xs">fly.toml</code> in your project root.<br/>
            2. Run <code className="bg-blue-900/40 px-1.5 py-0.5 rounded text-blue-200 font-mono text-xs font-bold">fly launch</code> or <code className="bg-blue-900/40 px-1.5 py-0.5 rounded text-blue-200 font-mono text-xs font-bold">fly deploy</code>.<br/>
            3. Don't forget to set your secrets!
          </p>
        </div>
      </div>
    </div>
  );
};

export default TomlPreview;


--- App.tsx ---


import React, { useState } from 'react';
import RepoInput from './components/RepoInput';
import TomlPreview from './components/TomlPreview';
import { analyzeRepoAndGenerateToml } from './services/geminiService';
import { AnalysisState } from './types';

const App: React.FC = () => {
  const [state, setState] = useState<AnalysisState>({
    loading: false,
    error: null,
    config: null,
  });

  const handleAnalyze = async (url: string) => {
    setState({ loading: true, statusMessage: "Initializing connection...", error: null, config: null });
    try {
      const config = await analyzeRepoAndGenerateToml(url, (status) => {
        setState(prev => ({ ...prev, statusMessage: status }));
      });
      setState({ loading: false, statusMessage: undefined, error: null, config });
    } catch (err: any) {
      console.error(err);
      setState({
        loading: false,
        statusMessage: undefined,
        error: err.message || "Failed to analyze repository. Ensure it's public and valid.",
        config: null,
      });
    }
  };

  return (
    <div className="min-h-screen pb-20 selection:bg-blue-500/30">
      {/* Hero / Header */}
      <header className="relative pt-20 pb-16 overflow-hidden">
        <div className="absolute top-0 left-1/2 -translate-x-1/2 w-full max-w-7xl h-full -z-10 pointer-events-none">
          <div className="absolute top-[-10%] left-[20%] w-64 h-64 bg-blue-600/20 blur-[100px] rounded-full"></div>
          <div className="absolute top-[20%] right-[20%] w-80 h-80 bg-purple-600/20 blur-[120px] rounded-full"></div>
        </div>

        <div className="container mx-auto px-4 text-center">
          <div className="inline-block px-4 py-1.5 mb-6 rounded-full glass text-xs font-bold text-blue-400 uppercase tracking-widest border border-blue-500/20 shadow-lg shadow-blue-500/10">
            Cloud Deployment Accelerated
          </div>
          <h1 className="text-5xl md:text-7xl font-extrabold mb-6 tracking-tight">
            Deploy to <span className="gradient-text">Fly.io</span> <br /> 
            in Seconds.
          </h1>
          <p className="text-slate-400 text-lg md:text-xl max-w-2xl mx-auto leading-relaxed">
            FlyWheel uses Gemini 3.0 to deeply scan your repository, detect your stack, and generate a production-ready configuration.
          </p>
        </div>
      </header>

      <main className="container mx-auto px-4 space-y-12">
        {/* URL Input Section */}
        <section>
          <RepoInput onAnalyze={handleAnalyze} loading={state.loading} />
          
          {state.error && (
            <div className="max-w-2xl mx-auto mt-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-center animate-shake flex items-center justify-center">
              <i className="fa-solid fa-circle-exclamation mr-2"></i>
              <span>{state.error}</span>
            </div>
          )}
        </section>

        {/* Results Section */}
        {state.loading && !state.config && (
          <section className="max-w-4xl mx-auto py-12">
            <div className="flex flex-col items-center justify-center space-y-6">
              <div className="relative">
                <div className="w-20 h-20 border-4 border-blue-500/20 border-t-blue-500 rounded-full animate-spin"></div>
                <div className="absolute inset-0 flex items-center justify-center">
                  <i className="fa-solid fa-microchip text-blue-500 animate-pulse"></i>
                </div>
              </div>
              <div className="text-center space-y-2">
                <h3 className="text-xl font-bold text-slate-200">Analyzing Repository...</h3>
                <p className="text-blue-300/80 text-sm font-mono animate-pulse">
                  {state.statusMessage || "Starting engine..."}
                </p>
              </div>
            </div>
          </section>
        )}

        {state.config && (
          <section className="max-w-5xl mx-auto">
            <TomlPreview config={state.config} />
          </section>
        )}

        {/* Features / Why section */}
        {!state.config && !state.loading && (
          <section className="grid grid-cols-1 md:grid-cols-3 gap-8 pt-12">
            {[
              {
                icon: "fa-bolt",
                title: "Zero Config",
                desc: "Forget manual TOML writing. We handle the boilerplate so you can push code.",
                color: "text-yellow-400"
              },
              {
                icon: "fa-brain",
                title: "AI Analysis",
                desc: "We read your Dockerfile, package.json, and config files to make smart decisions.",
                color: "text-blue-400"
              },
              {
                icon: "fa-shield-halved",
                title: "Security Ready",
                desc: "We identify needed secrets and provide secure defaults for internal networking.",
                color: "text-green-400"
              }
            ].map((f, i) => (
              <div key={i} className="glass p-8 rounded-2xl border border-slate-700/50 hover:border-blue-500/30 transition-all group hover:-translate-y-1 duration-300">
                <div className={`w-12 h-12 rounded-xl glass flex items-center justify-center mb-6 group-hover:scale-110 transition-transform`}>
                  <i className={`fa-solid ${f.icon} text-xl ${f.color}`}></i>
                </div>
                <h3 className="text-xl font-bold mb-3">{f.title}</h3>
                <p className="text-slate-400 text-sm leading-relaxed">{f.desc}</p>
              </div>
            ))}
          </section>
        )}
      </main>

      <footer className="mt-32 text-center text-slate-500 text-sm pb-8">
        <p>&copy; 2024 FlyWheel AI. Not affiliated with GitHub or Fly.io.</p>
        <div className="flex justify-center space-x-6 mt-4">
          <a href="#" className="hover:text-slate-300 transition-colors">Documentation</a>
          <a href="#" className="hover:text-slate-300 transition-colors">Github</a>
          <a href="#" className="hover:text-slate-300 transition-colors">Terms</a>
        </div>
      </footer>
    </div>
  );
};

export default App;


--- index.html ---


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlyWheel - GitHub to Fly.io</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
        }
        .mono {
            font-family: 'JetBrains Mono', monospace;
        }
        .glass {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .gradient-text {
            background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react-dom/": "https://esm.sh/react-dom@^19.2.4/",
    "react/": "https://esm.sh/react@^19.2.4/",
    "react": "https://esm.sh/react@^19.2.4",
    "@google/genai": "https://esm.sh/@google/genai@^1.41.0"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body>
    <div id="root"></div>
<script type="module" src="/index.tsx"></script>
</body>
</html>


--- index.tsx ---


import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';

const rootElement = document.getElementById('root');
if (!rootElement) {
  throw new Error("Could not find root element to mount to");
}

const root = ReactDOM.createRoot(rootElement);
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);


--- vite.config.ts ---

import path from 'path';
import { defineConfig, loadEnv } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig(({ mode }) => {
    const env = loadEnv(mode, '.', '');
    return {
      server: {
        port: 3000,
        host: '0.0.0.0',
      },
      plugins: [react()],
      define: {
        'process.env.API_KEY': JSON.stringify(env.GEMINI_API_KEY),
        'process.env.GEMINI_API_KEY': JSON.stringify(env.GEMINI_API_KEY)
      },
      resolve: {
        alias: {
          '@': path.resolve(__dirname, '.'),
        }
      }
    };
});